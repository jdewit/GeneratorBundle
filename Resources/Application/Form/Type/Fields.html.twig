{% for field in fields %}
{% if field.type == 'string' %}
{% if field.fieldName == 'email' %}
            ->add('{{ field.fieldName }}', 'email', array(
                'label' => '{{ field.fieldName | camelCaseToTitle }}',
                'required' => false,
                'attr' => array(
                    'title' => 'Enter the {{ field.fieldName | camelCaseToTitle | lower }}',  
                    'class' => 'email',
{% if style == 'knockout' %}
                    'data-bind' => "
                        value: {{ field.fieldName }}
                    "
{% endif %}
                )
            ))          
{% elseif field.fieldName == 'date' %}
            ->add('{{ field.fieldName }}', 'date', array(
                'label' => '{{ field.fieldName | camelCaseToTitle }}',
                'required' => false,
                'widget' => 'single_text',
                'input' => 'string',
                'format' => 'yyyy-MM-dd', 
                'attr' => array(
                    'title' => 'Pick a date',
{% if style == 'knockout' %}
                    'data-bind' => "
                        value: {{ field.fieldName }},
                        datepicker: true
                    "
{% endif %}
                ),
            ))
{% elseif field.fieldName == 'country' %}
            ->add('{{ field.fieldName }}', 'country', array(
                'label' => '{{ field.fieldName | camelCaseToTitle }}',
                'required' => false,
                'attr' => array(
                    'title' => 'Enter the {{ field.fieldName | camelCaseToTitle | lower }}',  
                    'class' => '',
{% if style == 'knockout' %}
                    'data-bind' => "
                        value: {{ field.fieldName }}
                    "
{% endif %}
                )
            ))   
{% elseif field.fieldName == 'zipCode' %}
            ->add('{{ field.fieldName }}', 'text', array(
                'label' => '{{ field.fieldName | camelCaseToTitle }}',
                'required' => false,
                'attr' => array(
                    'title' => 'Enter the {{ field.fieldName | camelCaseToTitle | lower }}',  
                    'class' => 'zipCode',
{% if style == 'knockout' %}
                    'data-bind' => "
                        value: {{ field.fieldName }}
                    "
{% endif %}
                )
            ))   
{% else %}
            ->add('{{ field.fieldName }}', 'text', array(
                'label' => '{{ field.fieldName | camelCaseToTitle }}',
                'required' => false,
                'attr' => array(
                    'title' => 'Enter the {{ field.fieldName | camelCaseToTitle | lower }}',  
                    'class' => 'capitalize',
{% if style == 'knockout' %}
                    'data-bind' => "
                        value: {{ field.fieldName }}
                    "
{% endif %}
                )
            ))   
{% endif %}
{% elseif field.type == 'decimal' %}
            ->add('{{ field.fieldName }}', 'number', array(
                'label' => '{{ field.fieldName | camelCaseToTitle }}',
                'required' => false,
                'precision' => {{ field.precision }},
                'attr' => array(
                    'title' => 'Enter the {{ field.fieldName | camelCaseToTitle | lower }}',  
                    'class' => 'number',
{% if style == 'knockout' %}
                    'data-bind' => "
                        value: {{ field.fieldName }}
                    "
{% endif %}

                )
            ))      
{% elseif field.type == 'text' %}
            ->add('{{ field.fieldName }}', 'textarea', array(
                'label' => '{{ field.fieldName | camelCaseToTitle }}',
                'required' => false,
                'attr' => array(
                    'title' => 'Enter the {{ field.fieldName | camelCaseToTitle | lower }}',  
                    'class' => 'digits',
{% if style == 'knockout' %}
                    'data-bind' => "
                        value: {{ field.fieldName }}
                    "
{% endif %}

                )
            ))          
{% elseif field.type == 'datetime' %}
            ->add('{{ field.fieldName }}', 'date', array(
                'label' => '{{ field.fieldName | camelCaseToTitle }}',
                'required' => false,
                'widget' => 'single_text',
                'input' => 'datetime',
                'format' => 'yyyy-MM-dd', 
                'attr' => array(
                    'title' => 'Pick a date',
{% if style == 'knockout' %}
                    'data-bind' => "
                        value: {{ field.fieldName }},
                        datepicker: true
                    "
{% endif %}
                ),
            ))
{% elseif field.type == 'manyToOne' %}
{% if field.fieldName == 'image' %}
            ->add('image', new \Avro\AssetBundle\Form\Type\ImageFormType(), array(
                'required' => false,
                'label' => 'false'
            ))
{% else %}
            ->add('{{ field.fieldName }}', 'entity', array(
                'empty_value' => 'Select a {{ field.fieldName | camelCaseToTitle | lower }}...',
                'label' => '{{ field.fieldName | camelCaseToTitle }}',
                'required' => false,
                'class' =>'{{ field.targetEntity }}',
                'query_builder' => function ($repository) use ($owner) { return $repository->createQueryBuilder('e')->where('e.owner = ?1')->setParameter('1', $owner); },
                'attr' => array(
                    'title' => 'Choose a {{ field.fieldName }}',  
                    'class' => '',
{% if style == 'knockout' %}
                    'data-href' => $this->router->generate('{{ bundle_alias }}_{{ field.fieldName }}_getForm'),
                    'data-bind' => "
                        value: selected{{ field.fieldName | ucFirst }},
                        newSelect: selected{{ field.fieldName | ucFirst }}
                    "
{% endif %}
                )
            ))  
{% endif %}
{% elseif field.type == 'oneToMany' %}
            ->add('{{ field.fieldName }}', 'collection', array(
                'label' => 'false',
                'required' => false,
                'type' => new \{{ bundle_namespace }}\Form\Type\{{ field.fieldName | ucFirst }}FormType(),
                'allow_add' => true,
                'allow_delete' => true,
                'prototype' => true,
                'by_reference' => false,
                'options' => array('data_class' => '{{ bundle_namespace }}\Entity\{{ field.fieldName | ucFirst |slice(0, -1) }}'), 
            ))
{% elseif field.type == 'manyToMany' %}
            ->add('{{ field.fieldName }}s', 'collection', array(
                'label' => 'false',
                'required' => false,
                'type' => new \{{ bundle_namespace }}\Form\Type\{{ field.fieldName | ucFirst }}FormType(),
                'allow_add' => true,
                'allow_delete' => true,
                'prototype' => true,
            ))
{% elseif field.type == 'boolean' %}  
            ->add('{{ field.fieldName }}', 'checkbox', array(
                'label' => '{{ field.fieldName | camelCaseToTitle }}',
                'required' => false,
                'attr' => array(
                    'title' => '{{ field.fieldName | camelCaseToTitle }}?',  
{% if style == 'knockout' %}
                    'data-bind' => "
                        checked: {{ field.fieldName }}
                    "
{% endif %}
                )
            ))   
{% else %}
            ->add('{{ field.fieldName }}', '{{ field.type }}', array(
                'label' => '{{ field.fieldName | camelCaseToTitle }}',
                'required' => false,
                 'attr' => array(
                    'title' => 'Enter the {{ field.fieldName | camelCaseToTitle | lower }}',  
                    'class' => '',
{% if style == 'knockout' %}
                    'data-bind' => "
                        value: {{ field.fieldName }}
                    "
{% endif %}
                )
           ))            
{% endif %}
{% endfor %}

