function {{ entity_cc }}Model({{ entity_cc }}, newUrl, editUrl) {
    var self = this;
    self.{{ entity_cc }}Id = ko.observable();
    self.formAction = ko.observable();
    self.formMode = ko.observable();
{% for field in fields %}
{% if field.type == 'oneToMany' %}
    self.{{ field.fieldName }} = ko.observableArray();
{% elseif field.type == 'manyToOne' %}
    self.selected{{ field.fieldName|ucFirst }} = ko.observable();
{% else %}
    self.{{ field.fieldName }} = ko.observable();
{% endif %}
{% endfor %}
    self.isDeleted = ko.observable();

    self.set{{ entity }} = function({{ entity_cc }}) {
        self.{{ entity_cc }}Id({{ entity_cc }} ? {{ entity_cc }}.id : null);
        self.formMode({{ entity_cc }} ? 'edit' : 'new');
        self.formAction({{ entity_cc }} ? editUrl +'/'+ {{ entity_cc }}.id : newUrl);
{% for field in fields %}
{% if field.fieldName == 'date' %}
        self.{{ field.fieldName }}({{ entity_cc }} ? {{ entity_cc }}.{{ field.fieldName }} : getTodaysDate());
{% elseif field.type == 'manyToOne' %}
        self.selected{{ field.fieldName|ucFirst }}({{ entity_cc }} ? ({{ entity_cc }}.{{ field.fieldName }} ? {{ entity_cc }}.{{ field.fieldName }}.name : null ) : null);
{% elseif field.type == 'datetime' %}
        self.{{ field.fieldName }}({{ entity_cc }} ? {{ entity_cc }}.{{ field.fieldName }} : getTodaysDate());
{% else %}
        self.{{ field.fieldName }}({{ entity_cc }} ? {{ entity_cc }}.{{ field.fieldName }} : null);
{% endif %}
{% endfor %}
        self.isDeleted({{ entity_cc }} ? {{ entity_cc }}.is_deleted : null);
    }

    self.set{{ entity }}({{ entity_cc }});
}


